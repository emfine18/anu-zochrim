<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Anu Zochrim – Search the Database</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="logo.png">

<!-- NOTO SERIF -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@400;500;600&display=swap" rel="stylesheet">

<!-- LIBS -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

<style>
:root {
  --olive: #556b2f;
  --olive-dark: #3f5222;
  --bg: #f8f7f4;
  --border: #e5e7eb;
}

body {
  margin: 0;
  font-family: "Noto Serif", serif;
  background: var(--bg);
  color: #1f2937;
}

/* HEADER */
header {
  background: white;
  border-bottom: 1px solid var(--border);
}
nav {
  max-width: 1200px;
  margin: auto;
  padding: 16px 24px;
  display: flex;
  justify-content: space-between;
}
nav a {
  margin-left: 18px;
  color: var(--olive);
  text-decoration: none;
  font-weight: 500;
}

/* HERO */
.hero {
  max-width: 1200px;
  margin: auto;
  padding: 40px 24px 28px;
}
.hero h1 {
  font-size: 2.4rem;
  margin-bottom: 6px;
}
.hero h2 {
  font-size: 1.15rem;
  font-weight: 400;
  color: var(--olive);
}

/* SEARCH */
#search {
  max-width: 900px;
  margin: 20px auto 40px;
  padding: 0 24px;
}
.search-title {
  font-weight: 600;
  font-size: 1.4rem;
  text-transform: uppercase;
  color: var(--olive);
  margin-bottom: 18px;
}

.filters {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
  margin-bottom: 18px;
}

select,
input {
  font-family: "Noto Serif", serif;
  font-size: 0.95rem;
  padding: 12px 14px;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  min-width: 220px;
}

button {
  font-family: "Noto Serif", serif;
  padding: 12px 26px;
  background: var(--olive);
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
button:hover {
  background: var(--olive-dark);
}

/* TABLE */
#tableSection {
  display: none;
  max-width: 1200px;
  margin: auto;
  padding: 0 24px 60px;
}
.table-wrap {
  background: white;
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 12px;
}

table.dataTable thead th {
  background: #f3f4f1;
  color: var(--olive);
  font-weight: 600;
}

footer {
  border-top: 1px solid var(--border);
  padding: 30px;
  text-align: center;
  font-size: 0.85rem;
  background: white;
}
</style>
</head>

<body>

<header>
  <nav>
    <strong>Anu Zochrim</strong>
    <div>
      <a href="#">Home</a>
      <a href="#">Database</a>
      <a href="#">About</a>
      <a href="#">עברית</a>
    </div>
  </nav>
</header>

<section class="hero">
  <h1>October 7 Database</h1>
  <h2>Search and remember those murdered, fallen, and kidnapped</h2>
</section>

<section id="search">
  <h3 class="search-title">Search the Database</h3>

  <div class="filters">
    <input id="globalSearch" placeholder="Search names, places, roles…" />
    <button id="searchBtn">Search</button>
    <button id="resetBtn">Reset</button>
  </div>
</section>

<section id="tableSection">
  <div class="table-wrap">
    <table id="oct7table" class="display nowrap" style="width:100%">
      <thead></thead>
      <tbody></tbody>
    </table>
  </div>
</section>

<footer>
  Anu Zochrim is a volunteer memorial project.
</footer>

<script>
let table;

Papa.parse("https://raw.githubusercontent.com/yuval-harpaz/alarms/refs/heads/master/data/oct7database.csv", {
  download: true,
  header: true,
  complete: function(results) {
    const data = results.data;
    const cols = Object.keys(data[0]).map(c => ({ title: c, data: c }));

    $("#oct7table thead").html("<tr>" + cols.map(c => `<th>${c.title}</th>`).join("") + "</tr>");
    data.forEach(r => {
      $("#oct7table tbody").append(
        "<tr>" + cols.map(c => `<td>${r[c.data] || ""}</td>`).join("") + "</tr>"
      );
    });

    table = $("#oct7table").DataTable({
      paging: false,
      order: [],
      dom: "lrt"
    });
  }
});

$("#searchBtn").on("click", function() {
  const val = $("#globalSearch").val();
  if (!val) return;
  $("#tableSection").show();
  table.search(val).draw();
});

$("#resetBtn").on("click", function() {
  $("#globalSearch").val("");
  $("#tableSection").hide();
  table.search("").draw();
});
</script>

</body>
</html>
